<launch>

  <arg name="sensorOffsetX" default="0"/>
  <arg name="sensorOffsetY" default="0"/>
  <arg name="cameraOffsetZ" default="0"/>
  <arg name="twoWayDrive" default="true"/>
  <arg name="maxSpeed" default="1.0"/>
  <arg name="autonomyMode" default="true"/>
  <arg name="autonomySpeed" default="2.0"/>
  <arg name="joyToSpeedDelay" default="2.0"/>

<!-- For robot1 -->

  <node pkg="local_planner" type="localPlanner" name="localPlanner1" output="screen" required="true">
    <param name="pathFolder" type="string" value="$(find local_planner)/paths" />
    <param name="vehicleLength" type="double" value="0.6" />
    <param name="vehicleWidth" type="double" value="0.6" />
    <param name="sensorOffsetX" value="$(arg sensorOffsetX)" />
    <param name="sensorOffsetY" value="$(arg sensorOffsetY)" />
    <param name="twoWayDrive" value="$(arg twoWayDrive)" />
    <param name="laserVoxelSize" type="double" value="0.05" />
    <param name="terrainVoxelSize" type="double" value="0.2" />
    <param name="useTerrainAnalysis" type="bool" value="true" />
    <param name="checkObstacle" type="bool" value="true" />
    <param name="checkRotObstacle" type="bool" value="false" />
    <param name="adjacentRange" type="double" value="4.25" />
    <param name="obstacleHeightThre" type="double" value="0.15" />
    <param name="groundHeightThre" type="double" value="0.1" />
    <param name="costHeightThre" type="double" value="0.1" />
    <param name="costScore" type="double" value="0.02" />
    <param name="useCost" type="bool" value="false" />
    <param name="pointPerPathThre" type="int" value="2" />
    <param name="minRelZ" type="double" value="-0.5" />
    <param name="maxRelZ" type="double" value="0.25" />
    <param name="maxSpeed" value="$(arg maxSpeed)" />
    <param name="dirWeight" type="double" value="0.02" />
    <param name="dirThre" type="double" value="90.0" />
    <param name="dirToVehicle" type="bool" value="false" />
    <param name="pathScale" type="double" value="1.25" />
    <param name="minPathScale" type="double" value="0.75" />
    <param name="pathScaleStep" type="double" value="0.25" />
    <param name="pathScaleBySpeed" type="bool" value="true" />
    <param name="minPathRange" type="double" value="1.0" />
    <param name="pathRangeStep" type="double" value="0.5" />
    <param name="pathRangeBySpeed" type="bool" value="true" />
    <param name="pathCropByGoal" type="bool" value="true" />
    <param name="autonomyMode" value="$(arg autonomyMode)" />
    <param name="autonomySpeed" value="$(arg autonomySpeed)" />
    <param name="joyToSpeedDelay" value="$(arg joyToSpeedDelay)" />
    <param name="joyToCheckObstacleDelay" type="double" value="5.0" />
    <param name="goalClearRange" type="double" value="0.5" />
    <param name="goalX" type="double" value="0.0" />
    <param name="goalY" type="double" value="0.0" />
    <param name="odom_topic" value="/state_estimation1" />
    <param name="lidar_scan_pub" value="/registered_scan1" />
    <param name="terrain_map_topic" value="/terrain_map1" />
    <param name="path_header_frame_id" value="vehicle1" />
    <param name="navigation_boundary_topic" value="/navigation_boundary1" />
    <param name="path_topic_name" value="/path1" />
    <param name="waypoint_topic" value="/way_point1" />
    <param name="freepath_topic" value="/free_paths1" />
  </node>

  <node pkg="local_planner" type="pathFollower" name="pathFollower1" output="screen" required="true">
    <param name="sensorOffsetX" value="$(arg sensorOffsetX)" />
    <param name="sensorOffsetY" value="$(arg sensorOffsetY)" />
    <param name="pubSkipNum" type="int" value="1" />
    <param name="twoWayDrive" value="$(arg twoWayDrive)" />
    <param name="lookAheadDis" type="double" value="0.5" />
    <param name="yawRateGain" type="double" value="7.5" />
    <param name="stopYawRateGain" type="double" value="7.5" />
    <param name="maxYawRate" type="double" value="90.0" />
    <param name="maxSpeed" value="$(arg maxSpeed)" />
    <param name="maxAccel" type="double" value="2.5" />
    <param name="switchTimeThre" type="double" value="1.0" />
    <param name="dirDiffThre" type="double" value="0.1" />
    <param name="stopDisThre" type="double" value="0.2" />
    <param name="slowDwnDisThre" type="double" value="0.85" />
    <param name="useInclRateToSlow" type="bool" value="false" />
    <param name="inclRateThre" type="double" value="120.0" />
    <param name="slowRate1" type="double" value="0.25" />
    <param name="slowRate2" type="double" value="0.5" />
    <param name="slowTime1" type="double" value="2.0" />
    <param name="slowTime2" type="double" value="2.0" />
    <param name="useInclToStop" type="bool" value="false" />
    <param name="inclThre" type="double" value="45.0" />
    <param name="stopTime" type="double" value="5.0" />
    <param name="noRotAtStop" type="bool" value="false" />
    <param name="noRotAtGoal" type="bool" value="true" />
    <param name="autonomyMode" value="$(arg autonomyMode)" />
    <param name="autonomySpeed" value="$(arg autonomySpeed)" />
    <param name="joyToSpeedDelay" value="$(arg joyToSpeedDelay)" />
    <param name="odom_topic" value="/state_estimation1" />
    <param name="cmd_topic" value="/cmd_vel1" />
    <param name="path_topic_name" value="/path1" />
    <param name="cmd_header_frame_id" value="vehicle1" />
  </node>

  <node pkg="tf" type="static_transform_publisher" name="vehicleTransPublisher1" args="-$(arg sensorOffsetX) -$(arg sensorOffsetY) 0 0 0 0 /sensor1 /vehicle1 1000"/>

  <node pkg="tf" type="static_transform_publisher" name="sensorTransPublisher1" args="0 0 $(arg cameraOffsetZ) -1.5707963 0 -1.5707963 /sensor1 /camera1 1000"/>

<!-- For robot2 -->

  <node pkg="local_planner" type="localPlanner" name="localPlanner2" output="screen" required="true">
    <param name="pathFolder" type="string" value="$(find local_planner)/paths" />
    <param name="vehicleLength" type="double" value="0.6" />
    <param name="vehicleWidth" type="double" value="0.6" />
    <param name="sensorOffsetX" value="$(arg sensorOffsetX)" />
    <param name="sensorOffsetY" value="$(arg sensorOffsetY)" />
    <param name="twoWayDrive" value="$(arg twoWayDrive)" />
    <param name="laserVoxelSize" type="double" value="0.05" />
    <param name="terrainVoxelSize" type="double" value="0.2" />
    <param name="useTerrainAnalysis" type="bool" value="true" />
    <param name="checkObstacle" type="bool" value="true" />
    <param name="checkRotObstacle" type="bool" value="false" />
    <param name="adjacentRange" type="double" value="4.25" />
    <param name="obstacleHeightThre" type="double" value="0.15" />
    <param name="groundHeightThre" type="double" value="0.1" />
    <param name="costHeightThre" type="double" value="0.1" />
    <param name="costScore" type="double" value="0.02" />
    <param name="useCost" type="bool" value="false" />
    <param name="pointPerPathThre" type="int" value="2" />
    <param name="minRelZ" type="double" value="-0.5" />
    <param name="maxRelZ" type="double" value="0.25" />
    <param name="maxSpeed" value="$(arg maxSpeed)" />
    <param name="dirWeight" type="double" value="0.02" />
    <param name="dirThre" type="double" value="90.0" />
    <param name="dirToVehicle" type="bool" value="false" />
    <param name="pathScale" type="double" value="1.25" />
    <param name="minPathScale" type="double" value="0.75" />
    <param name="pathScaleStep" type="double" value="0.25" />
    <param name="pathScaleBySpeed" type="bool" value="true" />
    <param name="minPathRange" type="double" value="1.0" />
    <param name="pathRangeStep" type="double" value="0.5" />
    <param name="pathRangeBySpeed" type="bool" value="true" />
    <param name="pathCropByGoal" type="bool" value="true" />
    <param name="autonomyMode" value="$(arg autonomyMode)" />
    <param name="autonomySpeed" value="$(arg autonomySpeed)" />
    <param name="joyToSpeedDelay" value="$(arg joyToSpeedDelay)" />
    <param name="joyToCheckObstacleDelay" type="double" value="5.0" />
    <param name="goalClearRange" type="double" value="0.5" />
    <param name="goalX" type="double" value="2.0" />
    <param name="goalY" type="double" value="0.0" />
    <param name="odom_topic" value="/state_estimation2" />
    <param name="lidar_scan_pub" value="/registered_scan2" />
    <param name="terrain_map_topic" value="/terrain_map2" />
    <param name="path_header_frame_id" value="vehicle2" />
    <param name="navigation_boundary_topic" value="/navigation_boundary2" />
    <param name="path_topic_name" value="/path2" />
    <param name="waypoint_topic" value="/way_point2" />
    <param name="freepath_topic" value="/free_paths2" />
  </node>

  <node pkg="local_planner" type="pathFollower" name="pathFollower2" output="screen" required="true">
    <param name="sensorOffsetX" value="$(arg sensorOffsetX)" />
    <param name="sensorOffsetY" value="$(arg sensorOffsetY)" />
    <param name="pubSkipNum" type="int" value="1" />
    <param name="twoWayDrive" value="$(arg twoWayDrive)" />
    <param name="lookAheadDis" type="double" value="0.5" />
    <param name="yawRateGain" type="double" value="7.5" />
    <param name="stopYawRateGain" type="double" value="7.5" />
    <param name="maxYawRate" type="double" value="90.0" />
    <param name="maxSpeed" value="$(arg maxSpeed)" />
    <param name="maxAccel" type="double" value="2.5" />
    <param name="switchTimeThre" type="double" value="1.0" />
    <param name="dirDiffThre" type="double" value="0.1" />
    <param name="stopDisThre" type="double" value="0.2" />
    <param name="slowDwnDisThre" type="double" value="0.85" />
    <param name="useInclRateToSlow" type="bool" value="false" />
    <param name="inclRateThre" type="double" value="120.0" />
    <param name="slowRate1" type="double" value="0.25" />
    <param name="slowRate2" type="double" value="0.5" />
    <param name="slowTime1" type="double" value="2.0" />
    <param name="slowTime2" type="double" value="2.0" />
    <param name="useInclToStop" type="bool" value="false" />
    <param name="inclThre" type="double" value="45.0" />
    <param name="stopTime" type="double" value="5.0" />
    <param name="noRotAtStop" type="bool" value="false" />
    <param name="noRotAtGoal" type="bool" value="true" />
    <param name="autonomyMode" value="$(arg autonomyMode)" />
    <param name="autonomySpeed" value="$(arg autonomySpeed)" />
    <param name="joyToSpeedDelay" value="$(arg joyToSpeedDelay)" />
    <param name="odom_topic" value="/state_estimation2" />
    <param name="cmd_topic" value="/cmd_vel2" />
    <param name="path_topic_name" value="/path2" />
    <param name="cmd_header_frame_id" value="vehicle2" />
  </node>

  <node pkg="tf" type="static_transform_publisher" name="vehicleTransPublisher2" args="-$(arg sensorOffsetX) -$(arg sensorOffsetY) 0 0 0 0 /sensor2 /vehicle2 1000"/>
  <node pkg="tf" type="static_transform_publisher" name="laserTransPublisher2" args="0 0 0 0 0 0 /sensor2 /laser_frame2 1000"/>

  <node pkg="tf" type="static_transform_publisher" name="sensorTransPublisher2" args="0 0 $(arg cameraOffsetZ) -1.5707963 0 -1.5707963 /sensor2 /camera2 1000"/>

</launch>
